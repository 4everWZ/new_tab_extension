# 🎨 New Tab Extension

一个高度可自定义的 Chrome 新标签页扩展，具有优雅的壁纸系统、快捷方式管理和丰富的个性化设置。

## ✨ 功能特性

### 🖼️ 壁纸系统
- **本地上传**：上传自己的图片作为壁纸
- **Bing 壁纸**：自动加载必应每日壁纸，带 7 个高质量备选
- **Unsplash 壁纸**：从 Unsplash 加载精选风景照片，支持自动重试
- **壁纸刷新**：点击刷新按钮立即更换壁纸
- **遮罩控制**：调整白色遮罩透明度，改变壁纸显示效果

### 🔗 快捷方式
- **新增快捷方式**：快速添加常用网站
- **分页管理**：支持多页快捷方式，轻松切换
- **自定义图标**：为每个快捷方式设置独特的图标 emoji
- **网格布局**：支持 2×4、3×4、4×4 到自定义行列数

### 🔍 搜索功能
- **多搜索引擎**：支持 Google、Bing、Baidu，轻松切换
- **多搜索类型**：Web、Image、Video 等多种搜索模式
- **添加自定义引擎**：支持添加任意搜索引擎（使用 {query} 占位符）

### ⚙️ 个性化设置
#### 外观设置
- **搜索框大小**：调整搜索框宽度和高度（宽度百分比、高度像素）
- **搜索框样式**：自定义圆角程度和透明度
- **网格配置**：选择预设布局或自定义行列数
- **图标大小和样式**：调整图标尺寸和边角圆度
- **文字阴影**：启用/禁用文字阴影效果

#### 功能设置
- **隐藏搜索框**：可选择隐藏搜索框
- **壁纸源**：选择使用本地、Bing 或 Unsplash 壁纸
- **语言选择**：支持中文和英文

## 🚀 安装方法
### 开发者模式安装
1. 在 Chrome 地址栏输入 `chrome://extensions/`
2. 启用右上角的「开发者模式」
3. 点击「加载已解压的扩展程序」
4. 选择本扩展的文件夹

### 使用方法
1. 打开新标签页
2. 右上角 ⚙️ 按钮打开设置面板
3. 根据需要调整各项参数
4. 点击 + 按钮添加快捷方式

## 📁 文件结构
```text
new_tab_extension/
├── manifest.json          # Chrome 扩展配置
├── newtab.html           # 主 HTML 页面
├── style.css             # 样式表（813 行）
├── script.js             # 逻辑脚本（1400+ 行）
├── README.md             # 本文件
```

## 🎯 核心特性详解
### 壁纸加载机制
- 初始化时检查存储中的壁纸
- 如果有缓存壁纸则立即显示
- 否则异步加载网络壁纸
- 壁纸设置在 `body::before` 伪元素，确保正确显示
- 支持图片加载失败时自动重试

### 数据持久化
使用 `chrome.storage.local` 存储所有用户数据：
- `apps`: 快捷方式数据
- `settings`: 用户设置
- `wallpaperData`: 本地上传壁纸
- `currentBingWallpaper`: 当前 Bing 壁纸 URL
- `currentGoogleWallpaper`: 当前 Unsplash 壁纸 URL

### CSS 变量系统
响应式设计使用大量 CSS 变量：
- `--mask-opacity`: 遮罩透明度
- `--search-width-px`: 搜索框宽度（像素）
- `--search-height`: 搜索框高度（像素）
- `--search-radius`: 搜索框圆角
- `--search-opacity`: 搜索框透明度
- `--grid-cols`: 网格列数
- `--icon-size`: 图标大小
- 等等...

### 初始化流程
1. 加载 HTML、CSS、JavaScript
2. 设置 CSS 变量初始值
3. 从 storage 加载数据
4. 应用用户设置
5. 加载并显示壁纸
6. 渲染所有元素（无延迟，无动画）

## 🛠️ 技术栈
- **前端**：纯 HTML5 + CSS3 + ES6+ JavaScript（无框架）
- **存储**：Chrome Storage API
- **API**：
  - Bing 官方壁纸 API
  - Unsplash 图片服务

## 📝 常见问题
### Q: 壁纸为什么不显示？
A: 请检查：
1. 本地上传的图片格式是否正确
2. 网络连接是否正常
3. 浏览器控制台是否有错误信息

### Q: 如何恢复默认设置？
A: 在 Chrome 扩展设置中卸载并重新安装该扩展

### Q: 如何添加自定义搜索引擎？
A: 点击搜索框下方的搜索引擎下拉菜单，选择「+ 添加搜索引擎」，输入名称和 URL（URL 中用 `{query}` 表示搜索词）

### Q: 可以同时上传多个本地壁纸吗？
A: 目前只支持一个本地壁纸。如需更换，重新上传新的壁纸即可

## 🎨 自定义指南
### 修改默认壁纸
编辑 `script.js` 中的 `defaultSettings` 对象

### 修改颜色主题
编辑 `style.css` 中的 CSS 变量和颜色值

### 添加新快捷方式分类
修改 `defaultApps` 数组，为每个应用添加 `category` 字段

## 🤝 贡献
欢迎提交 Issue 和 Pull Request！

## TODO
- [ ] webdav 同步功能
- [ ] Vue/React 重构动画
- [ ] 上架 Chrome/edge 网上应用店

## 📄 许可证
MIT License

---

**享受你的新标签页！** 🎉
